---
output: html_document
editor_options: 
  chunk_output_type: console
---

# 문서 구성요소


![디지털 문서 구성요소](images/writing_document.jpg)

## 그래프

그래프(`ggplot`)에 사용되는 글꼴도 마찬가지로 `showtext` 패키지 웹폰트를 사용해서
다양한 한글도 사용할 수 있다. `showtext` 패키지는 `font_add_google()` 함수를 
통해서 구글 한글폰트를 지정하여 이를 `ggplot` 에 적용시킬 수 있다.

```{r}
#| warning: false
#| message: false
#| echo: true
library(tidyverse)
library(showtext)
library(palmerpenguins)

font_add_google("Nanum Pen Script", "nanum_pen_script")
font_add_google("Jua", "Jua")
showtext_auto()

theme_quarto <- theme(
  text = element_text(family = 'Jua', size = 25),
  plot.title.position = 'plot',
  plot.title = element_text(
    family = 'nanum_pen_script', size = 55,
    face = 'bold', 
    colour = thematic::okabe_ito(8)[3],
    margin = margin(t = 2, r = 0, b = 3, l = 0, unit = "mm")
  ),
  plot.subtitle = element_text(
    family = 'Jua', size = 25,
    face = 'bold', 
    colour = thematic::okabe_ito(8)[5],
    margin = margin(t = 0, r = 0, b = 0, l = 0, unit = "mm")
  )
  
)

theme_set(theme_minimal() + theme_quarto)

mass_flipper <- ggplot(data = penguins,
                       aes(x = flipper_length_mm,
                           y = body_mass_g,
                           color = species)) +
  geom_point(size = 3,
             alpha = 0.8) +
  labs(title = "팔머 관측소 LTER 서식 펭귄 크기",
       subtitle = "Adelie, Chinstrap, Gentoo 펭귄에 대한 물갈퀴 길이와 체질량",
       x = "물갈퀴 길이(Flipper length) (mm)",
       y = "체질량(Body mass) (g)")

mass_flipper
```


## 표

구글 폰트에서 다양한 글꼴을 표 제목, 표 칼럼명, 표 셀값에 다르게 적용하며
크기는 물론 색상과 굵기도 적용이 가능하다.

```{r}
#| warning: false
#| message: false
#| echo: true
library(gt)

basic_theme <- function(data, ...){
  data %>% 
    tab_options(
      column_labels.background.color = "blue",
      table.font.size = px(12),
      column_labels.font.size = px(20),
      row.striping.background_color = "#9678b6",
      heading.align = "left",
      heading.title.font.size = px(30)
  )
}

palmerpenguins::penguins %>% 
  select( 펭귄종=species, 섬=island, bill_length_mm, body_mass_g) %>% 
  slice_sample(n = 10) %>% 
  gt() %>% 
    tab_header(title = md("팔머 펭귄 표본 **10 마리** 측정 정보")) %>% 
    tab_source_note(source_note = "데이터: Kristen Gorman 박사와 남국 팔머 관측소(Palmer Station, Antarctica LTER)에서 수집") %>% 
    cols_label(bill_length_mm = "부리 길이 (mm)",
               body_mass_g    = "체질량 (g)") %>% 
  tab_style(
    style = cell_text(
      font = c(
        google_font(name = "Nanum Pen Script"),
        default_fonts()
      ),
      size = "xx-large",
      color = "gray35",
      weight = "bolder"
    ),
    locations = cells_body(columns = bill_length_mm)
  ) %>% 
  # 체질량 칼럼  ---------------
  tab_style(
    style = cell_text(
      font = c(
        google_font(name = "Black Han Sans"),
        default_fonts()
      ),
      size = "large",
      color = "blue",
      weight = "bolder"
    ),
    locations = cells_body(columns = body_mass_g)
  ) %>% 
  # 표 Header 와 첫번째 칼럼  ---------------
  tab_style(
    style = cell_text(
      font = google_font("Do Hyeon"), 
      size = "large"
    ),
    locations = list(
      cells_column_labels(everything()), 
      cells_body(columns = 1)
    )
  ) %>%   
  # 표 제목 ---------------
  tab_style(
    style = cell_text(
      font = google_font("Dokdo"), 
      align = "left", 
      size = "xx-large"
    ),
    locations = cells_title("title")
  ) %>%   
  basic_theme() 

```

## 다이어그램

```{mermaid}

graph LR

    chatGPT["챗GPT"] --> Contents

    subgraph Contents["디지털 글쓰기"]
        direction LR
        Writing["글감"] --> Table["표"]
        Writing --> Graph["그래프"]
        Writing --> Code["파이썬/R/SQL<br>코드"]
        Writing --> Figure["그림"]
        Writing --> Diagram["도형"]        
    end

    chatGPT --> Format
    Contents --> Format

    subgraph Format["구조와 외양"]
        direction LR
        Theme["구조와 외양"] --> Title["문서 구조"]
        Theme               --> Formatting["문서 서식"]
        Theme               --> Layout["문서 레이아웃"]
        Theme               --> reference["문서 참조"]
    end

    chatGPT --> Deployment
    Format --> Deployment

    subgraph Deployment["배포와 공유"]
        direction LR
        Deploy --> Reader["독자(사람)"]
        Deploy --> Author["독자(저작자)"]
        Deploy --> Machine["독자(기계)"]
    end


    style chatGPT fill:#f5f5f5,stroke:#333,stroke-width:3px
    style Contents fill:#059fff,stroke:#333,stroke-width:1px
    style Format fill:#fc0303,stroke:#333,stroke-width:1px
    style Deployment fill:#03fc30,stroke:#333,stroke-width:1px
```



## 보고서

데이터 사이언스 한글 출판 문서 제작을 위해서 다음 글꼴을 선택한다.
제목으로 산스 세리프 폰트로 구글 폰트에서 "노토 산스 세리프"를 선정하고,
본문은 눈누 웹사이트에서 "마루부리"를 선정하고 코딩 글꼴 폰트로 눈누에서
`D2Coding` 폰트를 지정한다.

- 산스 세리프(제목): Noto Sans Serif
- 세리프(본문): 마루부리 
- 등간격(코딩): D2Coding   
 

```{r}
#| warning: false
#| message: false
#| echo: true
#| eval: false

library(tidyverse)

mass_flipper <- ggplot(data = penguins,
                       aes(x = flipper_length_mm,
                           y = body_mass_g)) +
  geom_point(size = 3,
             alpha = 0.8) +
  theme_minimal() +
  labs(title = "팔머 관측소 LTER 서식 펭귄 크기",
       subtitle = "Adelie, Chinstrap, Gentoo 펭귄에 대한 물갈퀴 길이와 체질량",
       x = "물갈퀴 길이(Flipper length) (mm)",
       y = "체질량(Body mass) (g)") +
  theme_minimal()

```
  
 
### css 파일

출판문서 제작에 사용된 글꼴 관련 사항을 `css/quarto-fonts.css` 파일에 지정해둔다.


```{css}
/* 글꼴 */
@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR');

@import url('https://fonts.googleapis.com/css2?family=Noto+Serif+KR');

@import url('https://fonts.googleapis.com/css2?family=Nanum+Myeongjo&display=swap');

@font-face {
    font-family: 'MaruBuri-Regular';
    src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_20-10-21@1.0/MaruBuri-Regular.woff') format('woff');
    font-weight: normal;
    font-style: normal;
}

@font-face {
    font-family: 'D2Coding';
    src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_three@1.0/D2Coding.woff') format('woff');
    font-weight: normal;
    font-style: normal;
}

/* HTML */

h1, h2, h3, h4, h5, h6 {
  font-family: "Noto Sans KR", sans-serif;
}

body {
  font-family: "Nanum Myeongjo", "MaruBuri-Regular", "Noto Serif KR", serif;
  font-size: 15px;
}

tt, code, pre {
  font-family: "D2Coding", Consolas, monospace;
  font-size: 15px;
}
```

##  



