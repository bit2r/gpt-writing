---
output: html_document
editor_options: 
  chunk_output_type: console
editor: 
  markdown: 
    wrap: sentence
---

![](images/horst_quarto_schematic.png)

# 쿼토(Quarto)

쿼토(Quarto)는 다양한 프로그래밍 언어와 통합된 오픈소스 출판시스템이다. [Pandoc](https://pandoc.org/)에 기반을 두고 있으며, 프로그래밍 언어로 R, 파이썬, 줄리아, 자바스크립트(Observable JS) 등을 지원한다. 사용자는 다양한 출판 저작물을 생성할 수 있고, "차세대 R마크다운(Next-Generation R Markdown)"이라는 별명을 가지고 있는데 약 10년에 걸친 R 마크다운 성공과 실패 경험을 바탕으로 전혀 새로운 아키텍처로 재탄생했다. 쿼토의 개발 및 유지보수 팀이 잘 구성되어 있어 프로젝트의 지속 가능성과 신뢰성이 높다. 무료로 제공되기 때문에 누구나 쉽게 접근하고 기여할 수 있다. [@hyde2021single]

디지털 글쓰기 출판시스템에 대한 고민은 크게 세 가지로 나뉜다.

- **콘텐츠(Content)**: 저작물과 관련된 실질적인 내용
- **디자인(Design)**: 출판물 외양, 즉 'Look and Feel'
- **형식(Format)**: 출판물 최종 형태나 산출물

쿼토는 세 가지 요소를 충족시키기 위해 다양한 기능을 제공한다. 
팬독(Pandoc)과 마크다운을 활용하여 수식, 인용, 서지관리, 콜아웃(callout), 고급 레이아웃 등을 문서 저작을 지원하고, 고품질 논문, 보고서, 발표슬라이드(PPT), 웹사이트, 블로그, 전자책 등 다양한 형태 출판 산출물을 HTML, PDF, MS 워드, ePub 등 다양한 디지털 형식로 제작할 수 있다. 특히, 프로그래밍 언어와 문서 저작, 출판 산출물 사이의 연결고리로서 쿼토는 매우 유용한 도구로 평가받고 있으며, 버전 제어와 협업, 재현가능 과학기술 문서와 비즈니스에서 요구되는 자동화된 생산성 높은 문서저작에 큰 장점이 있다.

+---------------------------------+-----------------------------+-----------------------------------+
| 프로그래밍(계산)                | 문서 저작                   | 출력물                            |
+:===============================:+:===========================:+:=================================:+
| Python, R, Julia, Observable JS | Pandoc, 마크다운 (Markdown) | 문서, 웹사이트, PPT, 책, 블로그 등 |
+---------------------------------+-----------------------------+-----------------------------------+

## Single Sourcing 출판저작

데이터 사이언스 출판저작에 다소 차이는 있지만 출판에 대한 대체적인 방식은 유사할 것으로 보인다.
즉, Single Sourcing 을 콘텐츠 저작, 디자인, 최종 출판물 관리까지 일원화되어 자동화되어 체계적으로 관리된다면 중복되는 낭비는 물론 재현가능성도 높여 과학기술 출판저작물로 가장 이상적으로 간주되고 있다.

### 문제점

![문제점](images/single-sourcing-problem.jpg){#fig-problem}

### 개념

![Single Sourcing 개념](images/single-sourcing-concept.jpg){#fig-concept}

### Single Sourcing Multi-Use

![Single Sourcing Multi-Use](images/single-sourcing-publishing.jpg){#fig-publishing}

## 작업흐름

기존 R `.Rmd`, 파이썬 `.ipynb` 확장자를 갖는 작업흐름이 `.qmd` 파일로 단일화되는 것이 가장 큰 특징이다.
따라서 마크다운으로 콘텐츠를 작성하고 프로그래밍 코드를 R, 파이썬, 자바스크립트, 쥴리아 로 작성하게 되면 자동으로 계산을 수행하고 결과물을 마크다운으로 변환시키기 때문에 후속 작업을 신경쓰지 않고 원하는 결과물을 얻을 수 있는 장점이 있다.

## R (`.Rmd`)

![](images/rmd-knitr.png)

## 파이썬 (주피터)

![](images/jupyter-alone.png)

## Quarto - R

![](images/qmd-knitr.png)

## Quarto - 파이썬

![](images/qmd-jupyter.png)

## 주요 기능

+------------------+----------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------+
| Feature          | R Markdown                                                                                               | Quarto                                                                             |
+==================+==========================================================================================================+====================================================================================+
| Basic Formats    | -   [html_document](https://pkgs.rstudio.com/rmarkdown/reference/html_document.html)                     | -   [html](https://quarto.org/docs/output-formats/html-basics.html)                |
|                  |                                                                                                          |                                                                                    |
|                  | -   [pdf_document](https://pkgs.rstudio.com/rmarkdown/reference/pdf_document.html)                       | -   [pdf](https://quarto.org/docs/output-formats/pdf-basics.html)                  |
|                  |                                                                                                          |                                                                                    |
|                  | -   [word_document](https://pkgs.rstudio.com/rmarkdown/reference/word_document.html)                     | -   [docx](https://quarto.org/docs/output-formats/ms-word.html)                    |
+------------------+----------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------+
| Beamer           | -   [beamer_presentation](https://pkgs.rstudio.com/rmarkdown/reference/beamer_presentation.html)         | -   [beamer](https://quarto.org/docs/presentations/beamer.html)                    |
+------------------+----------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------+
| PowerPoint       | -   [powerpoint_presentation](https://pkgs.rstudio.com/rmarkdown/reference/powerpoint_presentation.html) | -   [pptx](https://quarto.org/docs/presentations/powerpoint.html)                  |
+------------------+----------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------+
| HTML Slides      | -   [xaringan](https://bookdown.org/yihui/rmarkdown/xaringan.html)                                       | -   [revealjs](https://quarto.org/docs/presentations/revealjs/)                    |
|                  |                                                                                                          |                                                                                    |
|                  | -   [revealjs](https://bookdown.org/yihui/rmarkdown/revealjs.html)                                       |                                                                                    |
+------------------+----------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------+
| Advanced Layout  | -   [tufte](https://bookdown.org/yihui/rmarkdown/tufte-handouts.html)                                    | -   [Quarto Article Layout](https://quarto.org/docs/authoring/article-layout.html) |
|                  |                                                                                                          |                                                                                    |
|                  | -   [distill](https://rstudio.github.io/distill/figures.html)                                            |                                                                                    |
+------------------+----------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------+
| Cross References | -   [html_document2](https://bookdown.org/yihui/bookdown/a-single-document.html)                         | -   [Quarto Crossrefs](https://quarto.org/docs/authoring/cross-references.html)    |
|                  | -   [pdf_document2](https://bookdown.org/yihui/bookdown/a-single-document.html)                          |                                                                                    |
|                  | -   [word_document2](https://bookdown.org/yihui/bookdown/a-single-document.html)                         |                                                                                    |
+------------------+----------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------+
| Websites & Blogs | -   [blogdown](https://pkgs.rstudio.com/blogdown/)                                                       | [Quarto Websites](https://quarto.org/docs/websites/)                               |
|                  |                                                                                                          |                                                                                    |
|                  | -   [distill](https://pkgs.rstudio.com/distill/)                                                         | [Quarto Blogs](https://quarto.org/docs/websites/website-blog.html)                 |
+------------------+----------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------+
| Books            | -   [bookdown](https://pkgs.rstudio.com/bookdown/)                                                       | [Quarto Books](https://quarto.org/docs/books/)                                     |
+------------------+----------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------+
| Interactivity    | [Shiny Documents](https://bookdown.org/yihui/rmarkdown/shiny-documents.html)                             | [Quarto Interactive Documents](https://quarto.org/docs/interactive/shiny/)         |
+------------------+----------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------+
| Paged HTML       | [pagedown](https://github.com/rstudio/pagedown)                                                          | Summer 2022                                                                        |
+------------------+----------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------+
| Journal Articles | [rticles](https://pkgs.rstudio.com/rticles/)                                                             | Summer 2022                                                                        |
+------------------+----------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------+
| Dashboards       | [flexdashboard](https://pkgs.rstudio.com/flexdashboard/) \|                                              | Fall 2022                                                                          |
+------------------+----------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------------------+


## 쿼토 해부


쿼토는 데이터 과학 문서 작성 패러다임을 바꾼 R마크다운의 후속작으로 볼 수 있다. 
쿼토는 10년 이상의 `knitr` 경험을 바탕으로 개발되었으며, 최근에는 위지윅(What You See Is What You Get) 패러다임도 RStudio **Visual 편집**에 도입하여 복잡한 코드 작성 없이 직관적으로 문서를 작성할 수 있다. R 사용자는 RStudio IDE, 파이썬 등 개발 경험이 풍부하신 분들은 파이참, VS코드, 이맥스/VIM 등 통합개발환경(IDE)을 쿼토 CLI를 통해 출판물을 쉽게 저작할 수 있다. 

쿼토는 다양한 프로그래밍 언어를 통해 계산(Computation) 기능을 문서에 담을 수 있도록 지원한다. R, 파이썬, SQL, 자바스크립트 등 다양한 프로그래밍 언어로 문서 내에 그래프, 표, 인터랙티브 결과물을 쉽게 삽입할 수 있다. 이러한 장점들이 모여 문서를 제작하고 유통하고 소비하는 데이터 과학자, 개발자, 과학기술 연구원, 사무노동자 분들의 시간을 줄여주고 업무 생산성을 크게 높여주는 도구로 자리매김하고 있다.


![쿼토 작업흐름](images/quarto-unification.png)

쿼토 저작은 크게 3가지 구성요소로 되어 있다.

-   메타데이터: YAML
-   텍스트: 마크다운
-   코드: `knitr`, `jupyter`

상기 구성요소를 조합하게 되면 다양한 데이터 사이언스 웹사이트를 비롯한 출판물을 제작하게 된다.

![Quarto 문서 구성요소](images/quarto-anatomy.png)

### YAML

메타데이터는 YAML인데 GNU처럼 "Yet Another Markup Language" 혹은 "YAML Ain't Markup Language"을 줄인단어다.

#### 키값

``` yaml
---
key: value
---
```

### 출력옵션

``` yaml
---
format: something
---
```

. . .

``` yaml
---
format: pdf
---
```

``` yaml
---
format: pdf
---
```

``` yaml
---
format: revealjs
---
```

### 상세 출력옵션

``` yaml
---
format: 
  html:
    toc: true
    code-fold: true
---
```

왜 YAML이 필요하게 된 것인가?
YAML은 단순히 `KEY: Value` 에 불과한데 CLI를 이해하게 되면 왜 YAML을 사용하는 것이 유용한지 이해할 수 있다.
먼저 간단한 CLI 명령어를 YAML로 변환해보자.

``` {.bash filename="terminal"}
quarto render document.qmd --to html
```

``` yaml
---
format: pdf
---
```

한단계 더 들어가서 좀더 많은 선택옵션을 넣어 고급 기능을 넣는 사례를 살펴본다.

``` {.bash filename="terminal"}
quarto render document.qmd --to html -M code fold:true
```

``` yaml
---
format: 
  html:
    toc: true
    code-fold: true
---
```

## 마크다운

[데이터 과학 문서](http://aispiration.com/comp_document/) 웹사이트에 "마크다운 기초", "고급 마크다운", "R 마크다운 실무" 를 참조한다.

## 코드

R, 파이썬, SQL, 자바스크립트 등 버그 없이 정상 동작하는 프로그램을 작성하여 포함시킨다.

## YAML 코드편집

RStudio, VSCode IDE는 탭-자동완성(tab-completion)을 제공한다.
즉, 첫단어를 타이핑하고 탭을 연결하여 키보드를 치게되면 연관 명령어가 나와 선택하면 된다.
혹은 <kbd>`Ctrl + space`</kbd> 단축키를 치게되면 전체 명령어가 나온다.

![](images/yaml-autocomplete.gif)

![](images/knitr-autocomplete.gif)

