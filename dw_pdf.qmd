---
output: html_document
editor_options: 
  chunk_output_type: console
editor: 
  markdown: 
    wrap: 72
---

# 쿼토 PDF

PDF는 기술적, 학술적, 사업적으로 혁신적인 문서 양식이다. PDF가 개발된
것은 오랜 역사를 자랑하지만 아래한글, 워드퍼펙트, MS 워드, 리브레 워드
등에 가려 그 진가를 발휘하지 못했다. 하지만 이제 PDF는 문서 출판의
최고봉이라는데 이의를 제기하는 사람은 없을 것이다.

PDF 를 통해 아도비(Adobe) 회사는 엄청난 성공을 이어나가고 있고, 과학기술
저작에도 필수적인 파일 형태라 PDF에 대한 기본소양은 인공지능 시대를 살고
있는 시민으로 누구나 갖춰야하는 소양이다.

## 환경설정

### 리눅스

[Install Quarto](https://docs.posit.co/resources/install-quarto/)
웹사이트에 쿼토 설치 방법이 잘 설명되어 있다. 먼저 쉘에서 `curl`로 쿼토
설치파일을 다운로드 받는다. `gdebi-core`를 설치하고 다운로드 받은 쿼토
파일을 `gdebi` 명령어로 설치하고 나서 `quarto --version` 명령어로 설치된
쿼토 버전을 확인한다.

``` bash
$ sudo curl -LO https://quarto.org/download/latest/quarto-linux-amd64.deb
$ sudo apt-get install gdebi-core
$ sudo gdebi quarto-linux-amd64.deb
$ quarto --version
1.3.450
```

### [\LaTeX](http://example.org) 설치

`TinyTeX`은 `TeX Live`를 기반으로 한 경량, 이식성 좋고, 사용하기 쉬운
[\LaTeX](http://example.org) 배포판으로 [\LaTeX](http://example.org) 설치와 관련된 일반적인 불편함을 해결하기
위해 만들어졌고, 특히 "이휘 쉬에(Yihui Xie)"가 개발하여 R과 R 마크다운
통합이 잘 되어 있다.

다른 [\LaTeX](http://example.org) 배포판들이 수 기가바이트(GB)의 크기를 갖지만, `TinyTeX`은
설치 크기가 작고 간단한 설치 과정을 제공으로 쉽지만 미려한 문서를 원하는
사용자들에게 인기가 많다. 특히, R과의 통합도 잘 이루어져 있어, [\LaTeX](http://example.org)
문서를 컴파일할 때 누락된 [\LaTeX](http://example.org) 패키지도 자동으로 설치해주는 기능이
많은 사랑을 받고 있다.

보통 TexLive에 기반을 둔 `tinytex` 를 사용하는데 한글을 사용하는
입장에서는 `kotex`를 설치하는 방법도 모색이 필요하다. 유니코드 문자를
처리하기 위해서 `xelatex`을 쿼토 $LaTeX$ 기본엔진으로 지정하면 `xelatex`을 통해 CJK 문자가 포함된 PDF 파일 제작이 가능하다.

쿼토를 설치하면 `quarto install tinytex` 명령어로 `TinyTeX`을 쉽게
설치할 수 있고, 설치 정보는 `quarto tools info tinytex`으로 파악이
가능하다.

```bash
$ quarto install tinytex
Installing tinytex
[✓] Downloading TinyTex v2023.09
[✓] Unzipping TinyTeX-v2023.09.tar.gz
[✓] Moving files
[✓] Verifying tlgpg support
[✓] Default Repository: https://mirrors.rit.edu/CTAN/systems/texlive/tlnet/
Installation successful

$ quarto tools info tinytex
{
  "name": "TinyTeX",
  "installed": true,
  "version": "v2023.09",
  "directory": "/home/statkclee/.TinyTeX",
  "bin-directory": "/home/statkclee/.TinyTeX/bin/x86_64-linux",
  "configuration": {
    "status": "ok"
  }
}
```


`kotex` 패키지 주요 장점 중 하나는 한글 관련 문제를 해결할 수 있는 다양한 [\LaTeX](http://example.org) 패키지와 기본 한글 글꼴을 내장하고 있어 한글 문서 작성이 훨씬 편리하다. 
하지만, `tinytex`를 기본 [\LaTeX](http://example.org) 엔진으로 사용할 경우, 누락된 패키지로 인해 추가 작업이 어려울 수 있다. 이러한 문제를 해결하기 위해 `tinytex::parse_install()` 함수를 사용하면, 오류가 발생한 텍스트를 붙여넣을 때 자동으로 필요한 패키지를 설치해 준다. 설치과정에서 오류 사항이 담긴 `.log` 파일을 `tinytex::parse_install()` 함수에 인자로 넣어주면, 
자동으로 필요한 패키지를 설치해 준다.

```{r}
#| eval = FALSE

# log 파일이 hello_world.log
tinytex::parse_install("hello_world.log")

tinytex::parse_install(
  text = "! LaTeX Error: File `titlepic.sty' not found."
)
```


## 헬로월드

기본적인 [\LaTeX](http://example.org) 문서 구조에 표, 수식, 다이어그램, 주석을 추가한 
[\LaTeX](http://example.org) 기본 문서를 작성한다.

```tex
\documentclass{article}  % 문서 클래스 지정. article은 학술 논문, 보고서 등에 적합하다.

\usepackage{tikz}  % tikz 패키지 추가. 그래픽을 그리기 위해 필요하다.

\title{fathers of the atomic bomb}  % 문서의 제목 설정
\author{Oppenheimer}  % 문서의 저자 설정
\date{\today}  % 문서의 날짜 설정. \today를 사용하여 오늘 날짜를 자동 입력한다.

\begin{document}  % 문서의 본문 시작

\maketitle  % 제목, 저자, 날짜를 출력

\section{Introduction}  % "Introduction"이라는 섹션 생성

The name "Oppenheimer"\footnote{Oppenheimer is pronounced in English as /ˈɒpənˌhaɪmər} is a German-origin surname that is most famously associated with J. Robert Oppenheimer, the American physicist known as one of the "fathers of the atomic bomb."  % 본문과 각주

\section{Table}  % "Table"이라는 섹션 생성
Below is a simple table.
\begin{center}
\begin{tabular}{|c|c|}
\hline
Header 1 & Header 2 \\  % 테이블의 헤더
\hline
Row 1, Col 1 & Row 1, Col 2 \\  % 첫 번째 행
Row 2, Col 1 & Row 2, Col 2 \\  % 두 번째 행
\hline
\end{tabular}
\end{center}  % 테이블 종료

\section{Equation}  % "Equation"이라는 섹션 생성
Here is a simple equation:
\begin{equation}  % 수식 환경 시작
  f(x) = x^2  % 수식
\end{equation}  % 수식 환경 종료

\section{Diagram}  % "Diagram"이라는 섹션 생성
Here is a simple diagram:
\begin{center}
\begin{tikzpicture}  % tikz로 그림을 그리기 시작
  \draw[->] (0,0) -- (4,0);  % x축 그리기
  \draw[->] (0,0) -- (0,4);  % y축 그리기
  \draw (0,0) -- (3,3);  % 대각선 그리기
\end{tikzpicture}
\end{center}  % 그림 환경 종료

\end{document}  % 문서의 본문 종료
```

RStudio로 [\LaTeX](http://example.org)을 이용해 PDF 문서를 생성할 때, 먼저 새로운 `.tex` 문서를 생성하고 표, 수식, 다이어그램, 주석이 포함된 [\LaTeX](http://example.org) 코드를 복사-붙여넣는다.  RStudio의 `Compile PDF` 버튼을 클릭하여 컴파하고, 완료되면 PDF 문서가 자동으로 열린다. 

:::::{.columns}
:::{.column width=65%}
![[\LaTeX](http://example.org) 문서 컴파일](images/pdf_english_rstudio.jpg)
:::

:::{.column width=5%}

:::

:::{.column width=30%}
![[\LaTeX](http://example.org) 헬로월드 기본 문서](images/pdf_english.jpg)
:::
:::::


### 한글 PDF

영문 PDF를 한글로 번역하여 동일한 방식으로 PDF 파일을 만들기 위해 컴파일하게 되면 한글이 깨지거나 아무것도 없는 PDF 문서가 생성된다.

```tex
\documentclass{article}

\usepackage{tikz}

\title{원자폭탄의 아버지들}
\author{오펜하이머}
\date{\today}

\begin{document}

\maketitle

\section{소개}

"오펜하이머"라는 이름\footnote{오펜하이머는 영어로 /ˈɒpənˌhaɪmər/ 로 발음된다}은 독일 기원의 성씨로 가장 유명한 사람은 미국 물리학자 J. 로버트 오펜하이머이다. 그는 "원자폭탄의 아버지"로 알려져 있다.

\section{표}
아래는 간단한 표이다.
\begin{center}
\begin{tabular}{|c|c|}
\hline
헤더 1 & 헤더 2 \\
\hline
행 1, 열 1 & 행 1, 열 2 \\
행 2, 열 1 & 행 2, 열 2 \\
\hline
\end{tabular}
\end{center}

\section{수식}
다음은 간단한 수식이다:
\begin{equation}
  f(x) = x^2
\end{equation}

\section{다이어그램}
아래는 간단한 다이어그램이다:
\begin{center}
\begin{tikzpicture}
  \draw[->] (0,0) -- (4,0);
  \draw[->] (0,0) -- (0,4);
  \draw (0,0) -- (3,3);
\end{tikzpicture}
\end{center}

\end{document}
```

:::::{.columns}
:::{.column width=65%}

![](images/pdf_korean.jpg)
:::

:::{.column width=5%}

:::

:::{.column width=30%}
![](images/pdf_korean_rstudio.jpg)
:::

:::::

한글이 PDF 문서에 표현되지 않는 문제는 글꼴을 `.tex` 파일에 지정함으로써 해결된다. 먼저 전제조건으로 한글 글꼴(예를 들어, 나눔고딕 글꼴)이 설치되어 있고 이를 [\LaTeX](http://example.org) 에서 컴파일하는 방식으로 작업한다.


```{tex}
#| source-line-numbers: "4-5"
\documentclass{article}

\usepackage{tikz}
\usepackage{fontspec}
\setmainfont{NanumGothic} % NanumGothic 글꼴이 설치되어야 함
\usepackage{tipa} % 발음기호(IPA symbols)

\title{원자폭탄의 아버지들}
\author{오펜하이머}
\date{\today}

\begin{document}

\maketitle

\section{소개}

"오펜하이머"라는 이름\footnote{오펜하이머는 영어로 \textipa{/ˈɒpənˌhaɪmər/} , \textipa{/\'{O}p@n\"{h}aIm@r/} 로 발음된다}은 독일 기원의 성씨로 가장 유명한 사람은 미국 물리학자 J. 로버트 오펜하이머이다. 그는 "원자폭탄의 아버지"로 알려져 있다.

\section{표}
아래는 간단한 표이다.
\begin{center}
\begin{tabular}{|c|c|}
\hline
헤더 1 & 헤더 2 \\
\hline
행 1, 열 1 & 행 1, 열 2 \\
행 2, 열 1 & 행 2, 열 2 \\
\hline
\end{tabular}
\end{center}

\section{수식}
다음은 간단한 수식이다:
\begin{equation}
  f(x) = x^2
\end{equation}

\section{다이어그램}
아래는 간단한 다이어그램이다:
\begin{center}
\begin{tikzpicture}
  \draw[->] (0,0) -- (4,0);
  \draw[->] (0,0) -- (0,4);
  \draw (0,0) -- (3,3);
\end{tikzpicture}
\end{center}

\end{document}

```


![\LaTeX 에서 한글문제를 해결한 PDF 문서](images/pdf_korean_hangul.jpg)





